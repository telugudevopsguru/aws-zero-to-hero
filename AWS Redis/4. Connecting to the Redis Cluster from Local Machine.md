#### INSTRUCTOR DETAILS

|  Information             | Details                                                                      |
|----------------------    |------------------------------------------------------------------------------|
| **Name**                 | Moole Muralidhara Reddy                                                      |
| **Email**                | telugudevopsguru@gmail.com                                                |
| **Website**              | https://www.telugudevopsguru.com               |
| **LinkedIn profile**     | [Moole Muralidhara Reddy](https://www.linkedin.com/in/moole-muralidhara-reddy) |

## 🔌 **Two Ways to Connect to an AWS Redis Cluster**

### ✅ **Option 1: Use Windows Subsystem for Linux (WSL) — Recommended**

#### 🔧 Steps:

1. **Install WSL** (if not already installed):

   ```powershell
   wsl --install
   ```

2. **Install Ubuntu (or another Linux distro)** from the Microsoft Store.

3. **Launch WSL** and install Redis CLI:

   ```bash
   sudo apt update
   sudo apt install redis-tools
   ```

4. **Verify version:**

   ```bash
   redis-cli --version
   ```

#### 🔗 **Connect to Redis Cluster (TLS Enabled)**

You can connect using either the **AWS endpoints** or **Route53 domain names**.

##### 🔸 **Using AWS Redis Primary & Reader Endpoints**

```bash
redis-cli -h your-redis-primary-endpoint.amazonaws.com -p 6379 --tls --insecure -a your-redis-auth-password
redis-cli -h your-redis-reader-endpoint.amazonaws.com -p 6379 --tls --insecure -a your-redis-auth-password
```

##### 🔸 **Using Route53 Custom DNS Records**

```bash
redis-cli -h tf-dev-redis-um.telugudevopsguru.in -p 6379 --tls --insecure -a your-redis-auth-password
redis-cli -h tf-dev-redis-um-r.telugudevopsguru.in -p 6379 --tls --insecure -a your-redis-auth-password
```

### ✅ **Option 2: Use `stunnel` on an Ubuntu Server**

If you're using a server without native TLS support in `redis-cli`, use `stunnel` to tunnel traffic securely.

#### 🔹 **Step 1: Install stunnel**

```bash
sudo apt update
sudo apt install stunnel4 -y
```

#### 🔹 **Step 2: Enable stunnel at Boot**

Edit the default config:

```bash
sudo nano /etc/default/stunnel4
```

Change:

```
ENABLED=0
```

To:

```
ENABLED=1
```

#### 🔹 **Step 3: Create the Stunnel Configuration**

```bash
sudo nano /etc/stunnel/redis.conf
```

Example configuration:

```ini
client = yes

[redis-cli]
accept = 127.0.0.1:6380
connect = your-redis-endpoint.amazonaws.com:6379
verifyChain = no
```

> 🔹 `accept`: Local port to connect `redis-cli` to
> 🔹 `connect`: Remote AWS ElastiCache Redis endpoint
> 🔹 `verifyChain = no`: Skips cert validation (for testing)

#### 🔹 **Step 4: Start stunnel**

```bash
sudo systemctl restart stunnel4
```

Or run manually:

```bash
sudo stunnel /etc/stunnel/redis.conf
```

#### 🔹 **Step 5: Connect Using redis-cli (Via Tunnel)**

```bash
redis-cli -h 127.0.0.1 -p 6380 -a your_redis_auth_password
```

### 🛡️ **(Optional) Enable Certificate Verification for Production**

If you require full TLS validation:

```ini
verifyChain = yes
CAfile = /path/to/ca-certificate.pem
```

Place certs in:

```bash
/etc/stunnel/certs/
```

### ⚠️ **Note:**

For Redis 7.x, ensure you are using `redis-cli` version 7 or higher. Older clients may fail to connect or support fewer features, especially over TLS.

### 🧪 **Troubleshooting Tip:**

If you're unable to connect or are debugging access issues, try **both methods** to verify:

* Network access
* TLS configuration
* AUTH password correctness

